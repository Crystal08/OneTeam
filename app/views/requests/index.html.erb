<% provide(:title, 'All Requests') %>
<h1>All Requests</h1>
</br>

<% @requests.each do |request| %>
  
  <% if !request.selected? %>
    <% if !request.done? %>

      <p><em><%= request.title %></em>, <%= request.start_date_str %>
       - <%= request.end_date_str %>(Open, <%= request.status %>)</p>
      <p>Posted by 
        <%= request.employee.first_name %> <%= request.employee.last_name %>
         in <%= request.location.name %> Office (Group: <%= request.group.name %>)</p>
      <p>Description: <%= request.task %></p>
      <p>Your <em>current skills</em> match for this project: <%= request.current_skills_count(current_employee) %> out of <%=request.skills.count %> skills</p>
      <p>Your <em>interested skills</em> match for this project: <%= request.desired_skills_count(current_employee) %> out of <%=request.skills.count %> skills</p>

      <% if request.find_responses(request).find_by_employee_id(current_employee) %>
          <div class='btn btn-med disabled'>Applied</div>
      <% else %>
          <%= button_to "Apply", new_request_response_path(request), 
            class: 'btn btn-med', :method => "get" %>
      <% end %>  
      
      <hr>
      </br>

    <% end %>
  <% end %>
<% end %>

  